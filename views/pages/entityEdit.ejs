<% include ../partials/header %>
<div id="row-container">
    <div id="main-window">
        <div>
            <a href="/entities/<%-entityData.id %>">Voir la fiche</a>
            <br>
            <img class="entity-default-icon" src="<%-entityData.defaultimage %>" />
            <h1><%-entityData.label %></h1>
            <% if (entityData.profileimage) { %>
            <div class="entity-profile-img-container">
                <img class="entity-profile-img" src="<%-entityData.profileimage %>" />
            </div>
            <% } %>
        

            <form action="/entities/update/<%-entityData.id %>" method="post">
                <label for="name">Nom</label>
                <input type="text" name="name" value="<%-entityData.label %>"/>
                <br>
                <label for="entityTypeId">Type</label>
                <select name="entityTypeId">
                        <% for (var j=0; j<entityTypes.length; j++) { %>
                            <option value="<%-entityTypes[j].id %>" <% if (entityTypes[j].id==entityData.entity_type_id) { %> selected <% } %>><%-entityTypes[j].name %></option>
                        <% } %>
                </select>
                <br>
                <label for="profilePicUrl">Image</label>
                <input type="text" name="profilePicUrl" value="<%-entityData.profileimage %>"/>
                <br><input type="submit" value="Enregistrer" />
            </form>
        </div>
        <div id="entity-relations-window"></div>
    </div>
</div>
<br class="clear-both" />
<h2>Créer une relation</h2>
<form action="/relations/insert" method="post">
    <input type="hidden" name="entitySourceId" value="<%-currentItemId %>" />
    <label>Avec</label>
    <select name="entityDestinationId">
        <option value="">-Choisir Destination-</option>
        <% for (var i=0; i<entityItems.length; i++) { %>
            <option value="<%-entityItems[i].id %>"><%-entityItems[i].name %></option>
        <% } %>
    </select>        
    <br><label>Année de début</label> <input type="text" name="year_begin" type="number"/>
    <br><label>Année de fin</label> <input type="text" name="year_end" type="number"/>
    <br><label>Libellé</label> <input type="text" name="name" type="text"/>
    <input type="submit" value="Créer" />
</form>
<br class="clear-both" />
<h2>En relation avec</h2>
<ul>
    <% for (var i=0; i<relationsItems.length; i++) { %>
        <li>
            <b><%-relationsItems[i].entity_name %></b>
            <%-relationsItems[i].relation_name %>
            <%-relationsItems[i].relation_year_begin %> <%-relationsItems[i].relation_year_end %>
        </li>
    <% } %>
</ul>
<% include ../partials/footer %>
